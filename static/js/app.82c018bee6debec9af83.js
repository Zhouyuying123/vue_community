webpackJsonp([1],{"8j4U":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=a("VU/8")({name:"App"},i,!1,function(t){a("RKQy")},null,null).exports,r=a("/ocq"),o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"top-bar"},[e("h2",{staticClass:"align-center"},[this._v("Vue中文社区")])])}]};var c=a("VU/8")({name:"topBar"},o,!1,function(t){a("TyBx")},"data-v-3a962073",null).exports,l={name:"navBottom",data:()=>({}),props:["page"]},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav-bottom"},[a("ul",[a("li",{class:{active:" "==t.page}},[a("router-link",{attrs:{to:"/"}},[t._v("首页")])],1),t._v(" "),a("li",{class:{active:"2"==t.page}},[a("router-link",{attrs:{to:"/message/2"}},[t._v("消息")])],1),t._v(" "),a("li",{class:{active:"3"==t.page}},[a("router-link",{attrs:{to:"/mine/3"}},[t._v("我的")])],1)])])},staticRenderFns:[]};var h=a("VU/8")(l,d,!1,function(t){a("mfOK")},"data-v-26b66204",null).exports,v=a("piuB"),u=(v.b,Number,String,String,String,String,Boolean,Function,String,Boolean,Number,String,{name:"tab",mixins:[v.b],mounted(){this.$nextTick(()=>{setTimeout(()=>{this.hasReady=!0},0)})},props:{lineWidth:{type:Number,default:3},activeColor:String,barActiveColor:String,defaultColor:String,disabledColor:String,animate:{type:Boolean,default:!0},customBarWidth:[Function,String],preventDefault:Boolean,scrollThreshold:{type:Number,default:4},barPosition:{type:String,default:"bottom",validator:t=>-1!==["bottom","top"].indexOf(t)}},computed:{barLeft(){if(this.hasReady){const t=this.scrollable?window.innerWidth/this.$children[this.currentIndex||0].$el.getBoundingClientRect().width:this.number;return`${this.currentIndex*(100/t)}%`}},barRight(){if(this.hasReady){const t=this.scrollable?window.innerWidth/this.$children[this.currentIndex||0].$el.getBoundingClientRect().width:this.number;return`${(t-this.currentIndex-1)*(100/t)}%`}},innerBarStyle(){return{width:"function"==typeof this.customBarWidth?this.customBarWidth(this.currentIndex):this.customBarWidth,backgroundColor:this.barActiveColor||this.activeColor}},barStyle(){const t={left:this.barLeft,right:this.barRight,display:"block",height:this.lineWidth+"px",transition:this.hasReady?null:"none"};return this.customBarWidth?t.backgroundColor="transparent":t.backgroundColor=this.barActiveColor||this.activeColor,t},barClass(){return{"vux-tab-ink-bar-transition-forward":"forward"===this.direction,"vux-tab-ink-bar-transition-backward":"backward"===this.direction}},scrollable(){return this.number>this.scrollThreshold}},watch:{currentIndex(t,e){this.direction=t>e?"forward":"backward",this.$emit("on-index-change",t,e),this.hasReady&&this.scrollToActiveTab()}},data:()=>({direction:"forward",right:"100%",hasReady:!1}),methods:{scrollToActiveTab(){if(!this.scrollable||!this.$children||!this.$children.length)return;const t=this.$children[this.currentIndex].$el;let e=0;const a=()=>{const s=this.$refs.nav;s.scrollLeft+=(t.offsetLeft-(s.offsetWidth-t.offsetWidth)/2-s.scrollLeft)/15,++e<15&&window.requestAnimationFrame(a)};window.requestAnimationFrame(a)}}}),p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vux-tab-wrap",class:"top"===t.barPosition?"vux-tab-bar-top":""},[a("div",{staticClass:"vux-tab-container"},[a("div",{ref:"nav",staticClass:"vux-tab",class:[{"vux-tab-no-animate":!t.animate},{scrollable:t.scrollable}]},[t._t("default"),t._v(" "),t.animate?a("div",{staticClass:"vux-tab-ink-bar",class:t.barClass,style:t.barStyle},[t.customBarWidth?a("span",{staticClass:"vux-tab-bar-inner",style:t.innerBarStyle}):t._e()]):t._e()],2)])])},staticRenderFns:[]};var _=a("VU/8")(u,p,!1,function(t){a("Ykpl")},null,null).exports,m=(v.a,String,Boolean,String,String,String,{name:"tab-item",mixins:[v.a],props:{activeClass:String,disabled:Boolean,badgeBackground:{type:String,default:"#f74c31"},badgeColor:{type:String,default:"#fff"},badgeLabel:String},computed:{style(){return{borderWidth:this.$parent.lineWidth+"px",borderColor:this.$parent.activeColor,color:this.currentSelected?this.$parent.activeColor:this.disabled?this.$parent.disabledColor:this.$parent.defaultColor,border:this.$parent.animate?"none":"auto"}}}}),f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vux-tab-item",class:[t.currentSelected?t.activeClass:"",{"vux-tab-selected":t.currentSelected,"vux-tab-disabled":t.disabled}],style:t.style,on:{click:t.onItemClick}},[t._t("default"),t._v(" "),void 0!==t.badgeLabel&&""!==t.badgeLabel?a("span",{staticClass:"vux-tab-item-badge",style:{background:t.badgeBackground,color:t.badgeColor}},[t._v("\n  "+t._s(t.badgeLabel))]):t._e()],2)},staticRenderFns:[]},g=a("VU/8")(m,f,!1,null,null,null).exports,b={name:"themeList",data:()=>({theme_menu:[{name:"全部",tab:"all"},{name:"精华",tab:"good"},{name:"分享",tab:"share"},{name:"问答",tab:"ask"},{name:"weex",tab:"weex"},{name:"招聘",tab:"job"}],tab_index:0,tab_name:"all",page:1,theme_list:[]}),created(){this.getThemeData("all",1,0)},methods:{getThemeData(t,e,a){this.tab_name=t,this.tab_index=a,this.page=e,this.$axios.get("/api/v1/topics",{params:{tab:t,limit:15,page:e}}).then(t=>{if(200!=t.status)return!1;var e=t.data.data;this.theme_list=e}).catch(t=>{console.log(t)})},tagDeal(t,e){switch(t){case"share":return e?"置顶":"分享";case"job":return"招聘";case"weex":return"weex";case"ask":return"问答"}},timeDeal(t){var e=(new Date).getTime(),a=new Date(t).getTime(),s=parseInt((e-a)/1e3);return s<60?"1分钟前":s<3600?parseInt(s/60)+"分钟前":s<86400?parseInt(s/3600)+"小时前":s<2592e3?parseInt(s/86400)+"天前":s<31104e3?parseInt(s/2592e3)+"月前":parseInt(s/31104e3)+"年前"}},components:{Tab:_,TabItem:g}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"theme-list"},[a("div",{staticClass:"nav"},[a("tab",{attrs:{"scroll-threshold":6,"bar-active-color":"#1F78D4","active-color":"#1F78D4"}},t._l(t.theme_menu,function(e,s){return a("tab-item",{key:e.tab,attrs:{selected:t.tab_index==s},on:{"on-item-click":function(a){t.getThemeData(e.tab,1,s)}}},[t._v("\n                "+t._s(e.name)+"\n            ")])}))],1),t._v(" "),a("div",{staticClass:"theme-box"},t._l(t.theme_list,function(e){return a("div",{staticClass:"theme"},[a("router-link",{attrs:{to:"/article/"+e.id}},[a("div",{staticClass:"title"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:e.author.avatar_url,alt:""}})]),t._v(" "),a("h2",[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"tab"},[a("span",{class:{top:e.top}},[t._v(t._s(t.tagDeal(e.tab,e.top)))])])]),t._v(" "),a("div",{staticClass:"option"},[a("div",[a("span",[t._v(t._s(e.author.loginname))]),t._v(" "),a("span",[t._v("最新"+t._s(t.timeDeal(e.last_reply_at)))])]),t._v(" "),a("div",[a("span",[t._v("回复:"+t._s(e.reply_count))]),t._v(" "),a("span",[t._v("浏览:"+t._s(e.visit_count))])])])])],1)}))])},staticRenderFns:[]};var y=a("VU/8")(b,C,!1,function(t){a("XQFn")},"data-v-5c94e322",null).exports,w={name:"home",data(){return{page:this.$route.params.page||" "}},components:{"top-bar":c,"nav-bar":h,"theme-list":y}},x={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home"},[e("top-bar"),this._v(" "),e("theme-list"),this._v(" "),e("nav-bar",{attrs:{page:this.page}})],1)},staticRenderFns:[]};var k=a("VU/8")(w,x,!1,function(t){a("gwSq")},"data-v-1aeb86d5",null).exports,$={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-list"},[a("div",{staticClass:"close-box"},[a("span",{staticClass:"align-center"},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"message-item"},[a("p",{staticClass:"topic-message"},[t._v("grace在"),a("a",{attrs:{href:"/details?id=59185fb54d2e582056ec6cda"}},[t._v("【最近在用vue2.0重构vue.js中文社区，此贴是测试的】")]),t._v("中回复你：")]),t._v(" "),a("div",{staticClass:"reply"},[a("p",[t._v("你的access  token怎么自动填充了你的access  token怎么自动填充了你的access  token怎么自动填充了你的access  token怎么自动填充了你的access  token怎么自动填充了你的access  token怎么自动填充了")])]),t._v(" "),a("p",{staticClass:"time"},[t._v("2018年04月04日 晚上20:58:16 星期三")])])])])}]};var S=a("VU/8")({name:"messageList"},$,!1,function(t){a("kP0s")},"data-v-5ecdf5c8",null).exports,R={name:"message",data(){return{page:this.$route.params.page}},components:{"top-bar":c,"nav-bar":h,"message-list":S}},T={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"message"},[e("top-bar"),this._v(" "),this._m(0),this._v(" "),this._m(1),this._v(" "),e("nav-bar",{attrs:{page:this.page}}),this._v(" "),e("message-list")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("dl",[e("dt",{staticClass:"align-center"},[this._v("未读消息")]),this._v(" "),e("dd",{staticClass:"align-center"},[e("span",{staticClass:"align-center"},[this._v("0")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("dl",[e("dt",{staticClass:"align-center"},[this._v("已读消息")]),this._v(" "),e("dd",{staticClass:"align-center"},[e("span",{staticClass:"align-center"},[this._v("4")])])])}]};var B=a("VU/8")(R,T,!1,function(t){a("u7WD")},"data-v-0a9a42ac",null).exports,D={name:"mine",data(){return{page:this.$route.params.page}},components:{"top-bar":c,"nav-bar":h}},F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mine"},[a("top-bar"),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"mine-topic"},[a("ul",[a("li",[a("i"),t._v(" "),a("router-link",{attrs:{to:""}},[t._v("关注的主题(5)"),a("i")])],1),t._v(" "),a("li",[a("i"),t._v(" "),a("router-link",{attrs:{to:""}},[t._v("回复的主题(5)"),a("i")])],1),t._v(" "),a("li",[a("i"),t._v(" "),a("router-link",{attrs:{to:""}},[t._v("发布的主题(5)"),a("i")])],1)])]),t._v(" "),a("div",{staticClass:"release-btn align-center"},[t._v("发  布")]),t._v(" "),a("nav-bar",{attrs:{page:t.page}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mine-head"},[e("div",{staticClass:"user"},[e("span",{staticClass:"avatar"},[e("img",{attrs:{src:"https://avatars2.githubusercontent.com/u/20297227?v=4&s=120",alt:""}})]),this._v(" "),e("p",[this._v("UMust")])])])}]};var I=a("VU/8")(D,F,!1,function(t){a("8j4U")},"data-v-54967f18",null).exports,E={name:"articleDetail",data(){return{article_id:this.$route.params.id||"",article:{},focus_this:!1,accesstoken:"a38f7992-0096-4c65-b3ff-b7db7d264d98",reply_content:"",reply_id:"",reply_show:!1}},created(){this.getArticle(),this.verifyAccesstoken()},methods:{getArticle(){this.$axios.get("/api/v1/topic/"+this.article_id).then(t=>{if(200!=t.status)return!1;this.article=t.data.data}).catch(t=>{console.log(t)})},getUserData(t){this.$axios.get("/api/v1/user/"+t).then(t=>{if(200!=t.status)return!1;this.verifyCollect(this.article_id,t.data.data.collect_topics),console.log(this.focus_this)}).catch(t=>{console.log(t)})},verifyAccesstoken(){this.$axios.post("/api/v1/accesstoken",{accesstoken:this.accesstoken}).then(t=>{if(200!=t.status)return!1;this.getUserData(t.data.loginname)}).catch(t=>{console.log(t)})},verifyCollect(t,e){for(var a=0;a<e.length;a++)if(t==e[a])return this.focus_this=!0,!1},timeDeal(t){var e=(new Date).getTime(),a=new Date(t).getTime(),s=parseInt((e-a)/1e3);return s<60?"1分钟前":s<3600?parseInt(s/60)+"分钟前":s<86400?parseInt(s/3600)+"小时前":s<2592e3?parseInt(s/86400)+"天前":s<31104e3?parseInt(s/2592e3)+"月前":parseInt(s/31104e3)+"年前"},tagDeal(t){switch(t){case"share":return"分享";case"job":return"招聘";case"weex":return"weex";case"ask":return"问答"}},supportReply(t){this.$axios.post("/api/v1/reply/"+t+"/ups",{accesstoken:this.accesstoken}).then(t=>{console.log(t)}).catch(t=>{console.log(t)})},commit_reply(){this.$axios.post("/api/v1/topic/"+this.article_id+"/replies",{accesstoken:this.accesstoken,content:this.reply_content,reply_id:this.reply_id}).then(t=>{if(this.closeReply(),200!=t.status)return!1;this.getArticle()}).catch(t=>{console.log(t),this.closeReply()})},closeReply(){this.reply_content="",this.reply_id="",this.reply_show=!1},openReply(){this.reply_show=!0},reply(t,e){this.reply_id=t,this.reply_content="@"+e+" ",this.reply_show=!0},collect(){this.focus_this=!this.focus_this}}},W={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"article",class:{"no-scroll":t.reply_show}},[a("div",{staticClass:"top-bar"},[a("a",{staticClass:"back align-center",attrs:{href:"javascript:history.go(-1)"}},[t._v("返回")]),t._v(" "),a("h2",{staticClass:"align-center"},[t._v("Vue中文社区")]),t._v(" "),a("div",{staticClass:"reply align-center",on:{click:t.openReply}},[t._v("评论")])]),t._v(" "),a("div",{staticClass:"article-content"},[a("h2",[t._v(t._s(t.article.title))]),t._v(" "),a("div",{staticClass:"title"},[a("div",[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:t.article.author.avatar_url,alt:""}})]),t._v(" "),a("div",{staticClass:"user-info"},[a("p",[t._v(t._s(t.article.author.loginname))]),t._v(" "),a("p",[t._v("发布于"+t._s(t.timeDeal(t.article.create_at)))])])]),t._v(" "),a("div",{staticClass:"article-data"},[a("p",[t._v("来自："+t._s(t.tagDeal(t.article.tab))),a("br"),t._v(t._s(t.article.visit_count)+"次访问")])])]),t._v(" "),a("div",{staticClass:"essay",domProps:{innerHTML:t._s(t.article.content)}})]),t._v(" "),a("div",{staticClass:"focus"},[a("div",{staticClass:"focus-tip"},[a("p",{directives:[{name:"show",rawName:"v-show",value:!t.focus_this,expression:"!focus_this"}]},[t._v("喜欢这篇文章？那就点击关注吧")]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:t.focus_this,expression:"focus_this"}]},[t._v("哈哈哈，您已关注！")])]),t._v(" "),a("div",{staticClass:"focus-option",on:{click:t.collect}},[a("i",{class:{active:t.focus_this}})])]),t._v(" "),a("div",{staticClass:"comment-box"},[a("h5",[t._v(t._s(t.article.replies.length)+"人评论：")]),t._v(" "),t._l(t.article.replies,function(e,s){return a("div",{staticClass:"comment"},[a("div",{staticClass:"title"},[a("div",[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:e.author.avatar_url,alt:""}})]),t._v(" "),a("div",{staticClass:"user-info"},[a("p",[t._v(t._s(e.author.loginname)),a("span",[t._v(t._s(s+1)+"楼")])]),t._v(" "),a("p",[t._v(t._s(t.timeDeal(e.create_at)))])])]),t._v(" "),a("div",{staticClass:"option"},[a("div",{staticClass:"reply",on:{click:function(a){t.reply(e.id,e.author.loginname)}}},[a("i")])])]),t._v(" "),a("div",{staticClass:"reply-content",domProps:{innerHTML:t._s(e.content)}})])})],2),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.reply_show,expression:"reply_show"}],staticClass:"reply_box"},[a("div",{staticClass:"reply_input"},[a("h4",{staticClass:"align-center"},[t._v("请输入评论内容")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reply_content,expression:"reply_content"}],attrs:{placeholder:"说点什么..."},domProps:{value:t.reply_content},on:{input:function(e){e.target.composing||(t.reply_content=e.target.value)}}}),t._v(" "),a("div",{staticClass:"btn"},[a("div",{staticClass:"cancle",on:{click:t.closeReply}},[t._v("取消")]),t._v(" "),a("div",{staticClass:"confirm",on:{click:t.commit_reply}},[t._v("提交")])])])])])},staticRenderFns:[]};var A=a("VU/8")(E,W,!1,function(t){a("rFIT")},"data-v-e97a03d4",null).exports;s.a.use(r.a);var U=new r.a({mode:"history",routes:[{path:"/",name:"home",component:k},{path:"/message/:page",name:"message",component:B},{path:"/mine/:page",name:"mine",component:I},{path:"/article/:id",name:"articleDetail",component:A}]}),L=a("mtWM"),P=a.n(L),N=a("mw3O"),V=a.n(N);new function(){var t=this;t.width=640,t.fontSize=40,t.widthProportion=function(){var e=(document.body&&document.body.clientWidth||document.getElementsByTagName("html")[0].offsetWidth)/t.width;return e>1?1:e<.5?.5:e},t.changePage=function(){document.getElementsByTagName("html")[0].setAttribute("style","font-size:"+t.widthProportion()*t.fontSize+"px !important")},t.changePage(),window.addEventListener("resize",function(){t.changePage()},!1),function(){var t=document.documentElement;if(!t)return;var e=Math.round(parseFloat(t.style.fontSize)),a=document.createElement("div");a.style.width="1rem",a.style.height="0",document.body.appendChild(a);var s=a.offsetWidth,i=e/s;1!=i&&document.getElementsByTagName("html")[0].setAttribute("style","font-size:"+parseFloat(t.style.fontSize)*i+"px !important");document.body.removeChild(a)}()};s.a.prototype.$axios=P.a,P.a.defaults.baseURL="https://www.vue-js.com",P.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",P.a.interceptors.request.use(function(t){return"post"==t.method&&(t.data=V.a.stringify(t.data)),t},function(t){return Promise.reject(t)}),P.a.interceptors.response.use(function(t){return t},function(t){return Promise.reject(t)}),new s.a({el:"#app",router:U,components:{App:n},template:"<App/>"})},RKQy:function(t,e){},TyBx:function(t,e){},XQFn:function(t,e){},Ykpl:function(t,e){},gwSq:function(t,e){},kP0s:function(t,e){},mfOK:function(t,e){},rFIT:function(t,e){},u7WD:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.82c018bee6debec9af83.js.map